@require '~site/settings.styl'
@require '~site/texture-classes.styl'
@require '~site/typography-classes.styl'

$p = ':global(.Â¶)'
$h1 = ':global(.à¹‘)'
$h2 = ':global(.à¹’)'
$h3 = ':global(.à¹“)'
$h4 = ':global(.à¹”)'
$h5 = ':global(.à¹•)'
$h6 = ':global(.à¹–)'
$ul = ':global(.â€¢)'
$ol = ':global(.â„–)'
$li = ':global(.Â·)'
$codeblock = ':global(.â¯)'
$pre = ':global(.ðŸ„°)'
$code = ':global(.ðšŠ)'
$hr = ':global(.â€”)'
$blockquote = ':global(.â)'
$footnote = ':global(.â€»)'
$cr = ':global(.â†©ï¸Ž)'

all-types()
  {$h1}, {$h2}, {$h3}, {$h4}, {$h5}, {$h6}, {$p}, {$ul}, {$ol}, {$li}, {$blockquote}, {$pre}
    {block}

+all-types()
  margin-bottom 0
  margin-left 0
  margin-right 0
  &:first-child
    margin-top 0

{$h1}
  @extend $font-size-5
{$h2}
  @extend $font-size-4
{$h3}
  @extend $font-size-3
{$h4}
  @extend $font-size-2
{$h5}
  @extend $font-size-1
{$h6}
  @extend $font-size-0
{$ul}
  list-style none
{$ol}
  list-style-type thai
{$li}
  position relative
{$ul} > {$li}::before
  display inline-block
  position absolute
  content "Â·"
  left -1em
  transform scale(1.5)
  transform-origin left
{$hr}
  height 0
  background none
  border-bottom 0
  border-right 0
  border-left 0
  margin-bottom -1px
  @extend $divider
{$cr}
  margin-left 0.1em
  margin-right 0.1em
{$pre}
  @extend $font-size-minus-1
  line-height beat(0.6666667)
  $border-width = 1px
  $padding = beat(0.5)
  border $border-width solid #dfdcd8
  padding "calc(%s - %s)" % ($padding $border-width)
  border-radius beat(0.25)
{$pre},
{$code}
  font-family $code-font
:global(.footnotes) > {$ol}
  list-style-type decimal
:global(.footnote-ref)
  font-weight 600
  > a
    color inherit
    opacity 0.5

setup-typography-rhythm(size)
  > {$h1}
  > {$h2}
  > {$h3}
  > {$h4}
  > {$h5}
  > {$h6}
  > {$p}
  > {$ul}
  > {$ol}
  > {$blockquote}
  > {$pre}
  > {$hr}
  > {$codeblock}
  > :global(.footnotes)
    &:not(:first-child)
      margin-top size
  > {$ul}
  > {$ol}
  > {$blockquote}
    padding-left (size)
  > {$ul} > {$li}
  > {$ol} > {$li}
    padding-left (size / 4)
    &:not(:first-child)
      margin-top (size / 2)
    &:not(:first-child) > {$p}
      margin-top (size)
  > {$h1} + {$h2}
    margin-top (size / 2)

enforce-typography-rules()
  {block}
  > {$blockquote}
  > {$ul} > {$li}
  > {$ol} > {$li}
    {block}
  > :global(.footnotes)
    {block}
    > {$ol} > {$li}
      {block}

.root
  display block
  word-wrap break-word

  :global
    sup.footnote-ref
      vertical-align baseline
      display inline-block
      position relative
      top -1ex
      > a
        text-decoration none

    a.footnote-backref
      text-decoration none

.root.is-main
  > {$h1}
  > {$h2}
  > {$h3}
  > {$h4}
  > {$h5}
  > {$h6}
  > {$p}
  > {$ul}
  > {$ol}
  > {$blockquote}
  > {$pre}
  > {$codeblock}
  > :global(.footnotes)
    width 700px
    box-sizing border-box
    max-width "calc(100vw - %s)" % (beat(0.5))
    margin-left auto
    margin-right auto

.size-normal
  composes font-size-1 from 'site/typography.styl'
  line-height beat(1)
  +enforce-typography-rules()
    setup-typography-rhythm(beat(1))
  > :global(.footnotes)
    @extend $font-size-0
    line-height beat(5 / 6)
    > {$ol} > {$li} > {$p}:not(:first-child)
      margin-top beat(5 / 6)

.size-small
  composes font-size-0 from 'site/typography.styl'
  line-height beat(3/4)
  +enforce-typography-rules()
    setup-typography-rhythm(beat(3/4))
